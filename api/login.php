<?php header('Content-Type: application/json; charset=utf-8'); require_once __DIR__.'/db.php'; $input=json_decode(file_get_contents('php://input'),true)?:[]; $username=$input['username']??''; $password=$input['password']??''; if(!$username||!$password){echo json_encode(['success'=>false,'error'=>'Missing']);exit;} $stmt=$pdo->prepare('SELECT user_id,name,username,password FROM users WHERE username=? LIMIT 1'); $stmt->execute([$username]); $u=$stmt->fetch(); if(!$u||!password_verify($password,$u['password'])){echo json_encode(['success'=>false,'error'=>'Invalid credentials']);exit;} unset($u['password']); echo json_encode(['success'=>true,'user'=>$u]); ?>